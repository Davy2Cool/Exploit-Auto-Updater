using System;
using System.Diagnostics;
using System.Windows.Forms;
using System.Net;
using System.IO;

namespace DavyRekt_Auto_Updater
{
    static class Program
    {
        [STAThread]
        static void Main()
        {
            MessageBox.Show("Downloading the latest DavyRekt! A .zip file will open when finished!", "Downloading...");
            /// Exploit Launcher by Dogix
            /// Fill in these settings.

            /// EXPLOIT SETTINGS -------------------------------------------------------------------

            /// Exploit Directory Name. This will be in %AppData%
            string ExploitDir = "DavyRekt";

            /// Exploit Direct Download URL
            string ExploitUrl = "https://sites.google.com/site/autoupdaterexploits/DavyRekt.zip?attredirects=0&d=1";
            // Exploit Name. Remember to include the '.exe'!
            string ExploitFileName = "DavyRekt.zip";

            /// DLL SETTINGS -----------------------------------------------------------------------

            /// Main DLL Settings
            string DllUrl = "https://wearedevs.com/Assets/Download/Safe/ExploitAPI/WeAreDevs_API.dll";
            string DllFileName = "WeAreDevs_API.dll";

            /// Using a second DLL?
            Boolean Dll2Enabled = false;
            string DllUrl2 = "";
            string DllFileName2 = "";

            /// Using a third DLL?
            Boolean Dll3Enabled = false;
            string DllUrl3 = "";
            string DllFileName3 = "";

            /// DO NOT MODIFY ANYTHING BEYOND THIS POINT UNLESS YOU KNOW WHAT YOU'RE DOING -------------------------------------------------------------------------------------

            string path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData).ToString();
            Directory.SetCurrentDirectory(path);
            Directory.CreateDirectory(@ExploitDir);
            Directory.SetCurrentDirectory(@ExploitDir);

            WebClient client = new WebClient();

            /// Download Main DLL
            File.Delete(@DllFileName);
            client.DownloadFile(DllUrl, @DllFileName);

            /// If DLL 2 is enabled, download it
            if (Dll2Enabled == true)
            {
                File.Delete(@DllFileName2);
                client.DownloadFile(DllUrl2, @DllFileName2);
            }

            /// If DLL 3 is enabled, download it
            if (Dll3Enabled == true)
            {
                File.Delete(@DllFileName3);
                client.DownloadFile(DllUrl3, @DllFileName3);
            }
            /// Download Exploit
            File.Delete(@ExploitFileName);
            client.DownloadFile(ExploitUrl, @ExploitFileName);

            /// Launch Exploit and Kill Launcher.
            Process.Start(@ExploitFileName);
            Application.Exit();
        }
    }
}